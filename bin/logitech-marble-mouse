#!/bin/sh -e
#
# Sets handedness for Logitech Marble Mouse trackball and buttons.
#
# Usage: logitech-marble-mouse {left|right}
#
# http://www.robmeerman.co.uk/unix/xinput
# http://wiki.archlinux.org/index.php/Logitech_Marble_Mouse
# https://help.ubuntu.com/community/Logitech_Marblemouse_USB
#
# Written in 2014 by Suraj N. Kurapati <https://github.com/sunaku>

device=$(xinput list --id-only 'Logitech USB Trackball')

case "$1" in
  (left)
    xinput set-button-map "$device" 3 9 1 4 5 6 7 8 2 10 11 12 13
    xinput set-int-prop "$device" 'Evdev Wheel Emulation' 8 1
    xinput set-int-prop "$device" 'Evdev Wheel Emulation Button' 8 8
    xinput set-int-prop "$device" 'Evdev Wheel Emulation Axes' 8 6 7 4 5
    ;;
  (right)
    xinput set-button-map "$device" 1 8 3 4 5 6 7 2 9 10 11 12 13
    xinput set-int-prop "$device" 'Evdev Wheel Emulation' 8 1
    xinput set-int-prop "$device" 'Evdev Wheel Emulation Button' 8 9
    xinput set-int-prop "$device" 'Evdev Wheel Emulation Axes' 8 6 7 4 5
    ;;
  (*)
    echo "$0: Please specify either 'left' or 'right' handedness."
    exit 1
    ;;
esac
