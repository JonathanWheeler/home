#!/bin/sh
# Summarizes the contents of the given DIRECTORY or FILE arguments.
test $# -eq 0 && set -- .
for argument; do
  listing=$(ls -1F "$argument")
  total=$(echo "$listing" | wc -l)
  echo -n "$argument: $total total"

  folders=$(echo "$listing" | grep -c '/$')
  test $folders -gt 0 && echo -n ", $folders folders"

  files=$(echo "$listing" | grep -c '[^*/=>@|]$')
  test $files -gt 0 && echo -n ", $files files"

  symlinks=$(echo "$listing" | grep -c '@$')
  test $symlinks -gt 0 && echo -n ", $symlinks symlinks"

  executables=$(echo "$listing" | grep -c '\*$')
  test $executables -gt 0 && echo -n ", $executables executables"

  sockets=$(echo "$listing" | grep -c '=$')
  test $sockets -gt 0 && echo -n ", $sockets sockets"

  whiteouts=$(echo "$listing" | grep -c '>$')
  test $whiteouts -gt 0 && echo -n ", $whiteouts whiteouts"

  pipes=$(echo "$listing" | grep -c '|$')
  test $pipes -gt 0 && echo -n ", $pipes pipes"

  echo
done

