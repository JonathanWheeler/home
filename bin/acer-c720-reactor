#!/bin/sh
#
# Reacts to hardware events and configures the system accordingly.
#
# Written in 2014 by Suraj N. Kurapati <https://github.com/sunaku>

trap "kill -- -$$" EXIT # terminate all background processes on exit
trap exit INT TERM # ensure the above trap is triggered on interrupt

acpi_listen | while read event; do
  case "$event" in
    # lock the screen when laptop lid is closed
    ('button/lid LID close')
      admit1 acer-c720-locker
      ;;
  esac
done &

stdbuf -oL udevadm monitor --udev | while read event; do
  case "$event" in
    # HDMI cable was unplugged or plugged in
    (*' change '*'/devices/pci0000:00/0000:00:02.0/drm/card0 (drm)')
      acer-c720-display
      ;;
  esac
done &

wait
