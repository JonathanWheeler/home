#!/bin/sh -x
#
# Reacts to hardware events and configures the system accordingly.
#
# Written in 2014 by Suraj N. Kurapati <https://github.com/sunaku>

while inotifywait -qqe close_write /sys/power/state; do
  # lock the screen when laptop is put to sleep
  admit1 laptop-locker &
done &

acpi_listen | while read event; do
  case "$event" in
    # readjust displays when HDMI is plugged in
    ('jack/videoout VIDEOOUT plug')
      laptop-display
      ;;
    # turn on the screen when HDMI is unplugged
    ('jack/videoout VIDEOOUT unplug')
      xrandr --auto
      ;;
  esac
done
